---
import Layout from "../../components/Layout.astro";
import { getCollection } from "astro:content";
import { getBasePath } from "../../lib/paths";

export const prerender = false;

const basePath = getBasePath();
const slug = Astro.params.slug as string;
const all = await getCollection('campaigns');
const entry = all.find(e => e.slug === slug);
if (!entry) {
  throw new Error(`Campaign not found: ${slug}`);
}
const { Content } = await entry.render();
---

<Layout title={entry.data.title} description={entry.data.description}>
  <article class="max-w-4xl mx-auto px-4 py-16">
    <header class="mb-8">
      <a href={`${basePath}campaigns`} class="text-sm text-gray-600 hover:text-gray-900 mb-6 inline-block">‚Üê Back to Campaigns</a>
      
      <div class="flex items-start gap-6 mb-6">
        {entry.data.organization && (
          <img 
            src={`${basePath}/images/${entry.slug}.png`}
            alt={`${entry.data.organization} logo`}
            class="w-24 h-24 rounded-full border-2 border-gray-200 object-cover flex-shrink-0"
            onerror="this.style.display='none'"
          />
        )}
        <div class="flex-1">
          <h1 class="text-3xl md:text-4xl font-bold mb-2">
            <span style="background: linear-gradient(135deg, rgb(147,51,234) 0%, rgb(109,40,217) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">{entry.data.title}</span>
          </h1>
          {entry.data.organization && (
            <p class="text-lg text-gray-700 mb-2">{entry.data.organization}</p>
          )}
          {entry.data.website && (
            <a href={entry.data.website} target="_blank" rel="noopener noreferrer" class="text-gray-600 hover:text-purple-600 underline text-sm">Official Website</a>
          )}
        </div>
      </div>
    </header>
    
    <div class="prose prose-lg max-w-none">

      <Content />
    </div>
  </article>
</Layout>
