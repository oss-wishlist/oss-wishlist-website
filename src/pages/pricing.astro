---
import { getBasePath } from '../lib/paths';
const basePath = getBasePath();
import Layout from '../components/Layout.astro';
import { getEntry, getCollection } from 'astro:content';
import { formatPrice } from '../lib/pricing';

const page = await getEntry('pages', 'pricing');
const { Content } = await page.render();
const allServices = await getCollection('services');
const services = allServices
  .filter((s) => s.data.service_type !== 'hosting')
  .sort((a, b) => a.data.title.localeCompare(b.data.title));
const hosting = allServices.find((s) => s.data.service_type === 'hosting');
---

<Layout title="Community Pricing Guide - OSS Wishlist" description="Transparent pricing for open source sustainability services. Fair rates that respect practitioner expertise and project needs.">
  <!-- Hero Section -->
  <section class="bg-gradient-to-br from-gray-100 to-gray-200 py-16">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h1 class="text-4xl font-bold text-gray-900 mb-4">{page.data.title}</h1>
      <p class="text-xl text-gray-600">
        {page.data.description}
      </p>
    </div>
  </section>

  <!-- Main Content -->
  <section class="py-12 bg-white">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="prose prose-lg max-w-none prose-headings:text-gray-900 prose-h2:text-3xl prose-h2:font-bold prose-h2:mb-6 prose-h2:mt-12 prose-h3:text-xl prose-h3:font-semibold prose-h3:mb-3 prose-h4:text-lg prose-h4:font-semibold prose-h4:mb-2 prose-p:text-gray-600 prose-ul:text-gray-600 prose-strong:text-gray-900">
        <Content />
      </div>
    </div>
  </section>

  <!-- Dynamic Pricing by Service -->
  <section class="py-12 bg-gray-50">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl font-bold text-gray-900 mb-2">Pricing Tiers by Service</h2>
      <p class="text-gray-600 mb-8">All prices are in USD.</p>

      <div class="space-y-10">
        {services.map((svc) => (
          <div class="border rounded-xl bg-white shadow-sm">
            <div class="p-6 border-b">
              <h3 class="text-2xl font-semibold text-gray-900">{svc.data.title}</h3>
              {svc.data.description && (
                <p class="mt-2 text-gray-600">{svc.data.description}</p>
              )}
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 p-6">
              <div class="border rounded-lg p-5">
                <div class="text-sm font-semibold text-gray-600 mb-1">SMALL</div>
                <div class="text-2xl font-bold text-gray-900 mb-2">{formatPrice(svc.data.pricing?.small ?? null)}</div>
                <div class="text-xs text-gray-500">Single-repo or limited scope</div>
              </div>
              <div class="border rounded-lg p-5">
                <div class="text-sm font-semibold text-gray-600 mb-1">MEDIUM</div>
                <div class="text-2xl font-bold text-gray-900 mb-2">{formatPrice(svc.data.pricing?.medium ?? null)}</div>
                <div class="text-xs text-gray-500">Multi-stakeholder, growing activity</div>
              </div>
              <div class="border rounded-lg p-5">
                <div class="text-sm font-semibold text-gray-600 mb-1">LARGE</div>
                <div class="text-2xl font-bold text-gray-900 mb-2">{formatPrice(svc.data.pricing?.large ?? null)}</div>
                <div class="text-xs text-gray-500">Complex ecosystem or high impact</div>
              </div>
            </div>
          </div>
        ))}

        {hosting && (
          <div class="border rounded-xl bg-white shadow-sm">
            <div class="p-6 border-b">
              <h3 class="text-2xl font-semibold text-gray-900">{hosting.data.title}</h3>
              {hosting.data.description && (
                <p class="mt-2 text-gray-600">{hosting.data.description}</p>
              )}
            </div>
            <div class="p-6">
              <div class="rounded-lg border p-5">
                <div class="text-sm font-semibold text-gray-600 mb-2">PRICING</div>
                <p class="text-gray-700">Credits and managed options vary by provider and configuration.</p>
              </div>
            </div>
          </div>
        )}
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="py-16 bg-gray-600">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h2 class="text-3xl font-bold text-white mb-4">Join Our Community</h2>
      <p class="text-xl text-gray-200 mb-8">Explore what we offer together, or share what your project needs</p>
      <div class="flex justify-center space-x-4">
        <a href={`${basePath}catalog`} class="bg-white text-gray-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors">
          Explore Services
        </a>
        <a href={`${basePath}maintainers`} class="border border-gray-300 text-white px-8 py-3 rounded-lg font-semibold hover:bg-gray-700 transition-colors">
          Share Your Wishlist
        </a>
      </div>
    </div>
  </section>
</Layout>
---
import { getBasePath } from '../lib/paths';
const basePath = getBasePath();
import Layout from '../components/Layout.astro';
import { getEntry } from 'astro:content';

const page = await getEntry('pages', 'pricing');
const { Content } = await page.render();
---

<Layout title="Community Pricing Guide - OSS Wishlist" description="Transparent pricing for open source sustainability services. Fair rates that respect practitioner expertise and project needs.">
  <!-- Hero Section -->
  <section class="bg-gradient-to-br from-gray-100 to-gray-200 py-16">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h1 class="text-4xl font-bold text-gray-900 mb-4">{page.data.title}</h1>
      <p class="text-xl text-gray-600">
        {page.data.description}
      </p>
    </div>
  </section>

  <!-- Main Content -->
  <section class="py-12 bg-white">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="prose prose-lg max-w-none prose-headings:text-gray-900 prose-h2:text-3xl prose-h2:font-bold prose-h2:mb-6 prose-h2:mt-12 prose-h3:text-xl prose-h3:font-semibold prose-h3:mb-3 prose-h4:text-lg prose-h4:font-semibold prose-h4:mb-2 prose-p:text-gray-600 prose-ul:text-gray-600 prose-strong:text-gray-900">
        <Content />
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="py-16 bg-gray-600">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h2 class="text-3xl font-bold text-white mb-4">Join Our Community</h2>
      <p class="text-xl text-gray-200 mb-8">Explore what we offer together, or share what your project needs</p>
      <div class="flex justify-center space-x-4">
        <a href={`${basePath}catalog`} class="bg-white text-gray-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors">
          Explore Services
        </a>
        <a href={`${basePath}maintainers`} class="border border-gray-300 text-white px-8 py-3 rounded-lg font-semibold hover:bg-gray-700 transition-colors">
          Share Your Wishlist
        </a>
      </div>
    </div>
  </section>
</Layout>
              </ul>
            </div>

            <!-- Small Projects -->
            <div class="border rounded-lg p-6">
              <div class="text-sm font-semibold text-gray-600 mb-2">SMALL PROJECTS</div>
              <div class="text-3xl font-bold text-gray-900 mb-4">$2,500</div>
              <div class="text-sm text-gray-600 mb-4">Per month</div>
              <ul class="text-sm text-gray-700 space-y-2">
                <li>• ~10 hours/month</li>
                <li>• PR reviews & merges</li>
                <li>• Issue triage</li>
                <li>• Routine maintenance</li>
              </ul>
            </div>


            <!-- Medium Projects -->
            <div class="border rounded-lg p-6">
              <div class="text-sm font-semibold text-gray-600 mb-2">MEDIUM PROJECTS</div>
              <div class="text-3xl font-bold text-gray-900 mb-4">$6,000</div>
              <div class="text-sm text-gray-600 mb-4">Per month</div>
              <ul class="text-sm text-gray-700 space-y-2">
                <li>• ~25 hours/month</li>
                <li>• More stakeholders & coordination</li>
                <li>• Release management</li>
                <li>• Security patches</li>
                <li>• Community moderation</li>
              </ul>
            </div>

            <!-- Large Projects -->
            <div class="border rounded-lg p-6">
              <div class="text-sm font-semibold text-gray-600 mb-2">LARGE PROJECTS</div>
              <div class="text-3xl font-bold text-gray-900 mb-4">$12,000</div>
              <div class="text-sm text-gray-600 mb-4">Per month</div>
              <ul class="text-sm text-gray-700 space-y-2">
                <li>• ~50+ hours/month</li>
                <li>• Complex multi-repo coordination</li>
                <li>• Emergency response capability</li>
                <li>• High-volume PR/issue management</li>
                <li>• Dedicated practitioner</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Additional Information -->
  <section class="py-12 bg-white">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="prose prose-lg max-w-none">
        <h2 class="text-3xl font-bold text-gray-900 mb-6">Community Questions</h2>
        
        <h3 class="text-xl font-semibold text-gray-900 mb-3">How are project sizes determined?</h3>
        <p class="text-gray-700 mb-6">
          Project size reflects the number of people involved, community activity, and complexity of needs. 
          During your initial conversation, practitioners work collaboratively with you to determine the most appropriate tier for your community's situation.
        </p>

        <h3 class="text-xl font-semibold text-gray-900 mb-3">Are these prices flexible?</h3>
        <p class="text-gray-700 mb-6">
          Our pricing tiers are community-established guidelines designed to honor fair compensation. 
          Every project is unique, and practitioners may adjust pricing based on specific circumstances, scope changes, or long-term partnerships. 
          However, our community values prevent significant underbidding that devalues people's expertise and time.
        </p>

        <h3 class="text-xl font-semibold text-gray-900 mb-3">How does pro bono work happen?</h3>
        <p class="text-gray-700 mb-6">
          Practitioners offering pro bono services typically prioritize projects with significant public benefit, 
          those serving underrepresented communities, critical infrastructure, or projects without alternative funding sources. 
          Each practitioner makes their own decisions about pro bono work based on their values and capacity.
        </p>

        <h3 class="text-xl font-semibold text-gray-900 mb-3">What's included in the pricing?</h3>
        <p class="text-gray-700 mb-6">
          All pricing includes the practitioner's time, expertise, and the deliverables outlined in the service description. 
          Any additional tools, travel, or specialized resources are discussed openly and agreed upon together before work begins.
        </p>

        <h3 class="text-xl font-semibold text-gray-900 mb-3">How are practitioners compensated?</h3>
        <p class="text-gray-700 mb-6">
          Practitioners receive payment directly through their Open Collective or GitHub Sponsors accounts. 
          Sometimes matches are made with people who work at ecosystem sponsor organizations. In these cases, 
          we trust those organizations to recognize and reward their team members' contributions in ways that work for everyone.
        </p>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="py-16 bg-gray-600">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h2 class="text-3xl font-bold text-white mb-4">Join Our Community</h2>
      <p class="text-xl text-gray-200 mb-8">Explore what we offer together, or share what your project needs</p>
      <div class="flex justify-center space-x-4">
        <a href={`${basePath}/catalog`} class="bg-white text-gray-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors">
          Explore Services
        </a>
        <a href={`${basePath}/maintainers`} class="border border-gray-300 text-white px-8 py-3 rounded-lg font-semibold hover:bg-gray-700 transition-colors">
          Share Your Wishlist
        </a>
      </div>
    </div>
  </section>
</Layout>
